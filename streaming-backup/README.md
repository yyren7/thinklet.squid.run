# Thinklet Streaming æ–‡æ¡£å¯¼èˆª

æ¬¢è¿ä½¿ç”¨ Thinklet æµåª’ä½“ç³»ç»Ÿï¼æœ¬æ–‡æ¡£å°†å¸®åŠ©ä½ å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„ä¿¡æ¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š

1. **[QUICK-START.md](./docs/QUICK-START.md)** â­ æœ€æ¨è
   - 3 æ­¥å³å¯å¯åŠ¨æµåª’ä½“ç¯å¢ƒ
   - åŒ…å«ç¯å¢ƒè¦æ±‚æ¸…å•
   - ä½¿ç”¨ `Start-Streaming-Auto.bat` ä¸€é”®å¯åŠ¨

2. **[README-streaming.md](./docs/README-streaming.md)**
   - è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£
   - å®Œæ•´çš„åŠŸèƒ½è¯´æ˜
   - é«˜çº§é…ç½®é€‰é¡¹

## ğŸ“š æ–‡æ¡£ç´¢å¼•

### åŸºç¡€é…ç½®

- **[QUICK-START.md](./docs/QUICK-START.md)**  
  å¿«é€Ÿå¯åŠ¨æŒ‡å—ï¼Œæ¨èæ‰€æœ‰ç”¨æˆ·é¦–å…ˆé˜…è¯»

- **[README-streaming.md](./docs/README-streaming.md)**  
  å®Œæ•´çš„æµåª’ä½“ç³»ç»Ÿæ–‡æ¡£ï¼ŒåŒ…æ‹¬ï¼š
  - Rancher Desktop é…ç½®æ­¥éª¤
  - å¤šè®¾å¤‡æµåª’ä½“æ”¯æŒ
  - SRS æœåŠ¡å™¨é…ç½®è¯¦è§£
  - æ•…éšœæ’æŸ¥æŒ‡å—

### è®¾å¤‡é…ç½®

- **[ANDROID-CONNECTION-GUIDE.md](./docs/ANDROID-CONNECTION-GUIDE.md)**  
  Android è®¾å¤‡è¿æ¥é…ç½®æŒ‡å—ï¼ŒåŒ…æ‹¬ï¼š
  - RTMP URL é…ç½®
  - ç½‘ç»œè¯Šæ–­æ­¥éª¤
  - å¸¸è§è¿æ¥é—®é¢˜è§£å†³æ–¹æ¡ˆ

### æ–‡ä»¶ä¼ è¾“

- **[FILE-TRANSFER-README.md](./docs/FILE-TRANSFER-README.md)**  
  å½•åƒæ–‡ä»¶è‡ªåŠ¨ä¼ è¾“åŠŸèƒ½ä½¿ç”¨æŒ‡å—ï¼ŒåŒ…æ‹¬ï¼š
  - æä½åŠŸè€—çš„æ–‡ä»¶ä¼ è¾“æ–¹æ¡ˆ
  - è‡ªåŠ¨ä¸‹è½½å’Œ MD5 æ ¡éªŒ
  - Web ç•Œé¢æ“ä½œè¯´æ˜

- **[file-transfer-design.md](./docs/file-transfer-design.md)**  
  æ–‡ä»¶ä¼ è¾“åŠŸèƒ½çš„æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼ˆå¼€å‘è€…å‚è€ƒï¼‰

## ğŸ“‚ æ–‡ä»¶å¤¹ç»“æ„

```
streaming/
â”œâ”€â”€ ğŸ“„ README.md                      # ä¸»å¯¼èˆªæ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”œâ”€â”€ ğŸ“„ package.json                   # Node.js é¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ package-lock.json              # ä¾èµ–é”å®šæ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸš€ Start-Streaming-Auto.bat       # ä¸€é”®å¯åŠ¨è„šæœ¬ â­
â”œâ”€â”€ ğŸ”§ start-streaming-environment.ps1 # PowerShell æ ¸å¿ƒè„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                          # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ QUICK-START.md               # å¿«é€Ÿå¼€å§‹æŒ‡å— â­
â”‚   â”œâ”€â”€ README-streaming.md          # è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ ANDROID-CONNECTION-GUIDE.md  # Android é…ç½®æŒ‡å—
â”‚   â”œâ”€â”€ FILE-TRANSFER-README.md      # æ–‡ä»¶ä¼ è¾“åŠŸèƒ½æ–‡æ¡£
â”‚   â””â”€â”€ file-transfer-design.md      # æŠ€æœ¯è®¾è®¡æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“‚ src/                           # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ simple-http-server.js        # HTTP/WebSocket æœåŠ¡å™¨
â”‚   â”œâ”€â”€ file-transfer-service.js     # æ–‡ä»¶ä¼ è¾“æœåŠ¡
â”‚   â”œâ”€â”€ i18n.js                      # å›½é™…åŒ–
â”‚   â””â”€â”€ main.js                      # å‰ç«¯ä¸»è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“‚ public/                        # Web èµ„æºç›®å½•
â”‚   â”œâ”€â”€ index.html                   # Web ç•Œé¢
â”‚   â””â”€â”€ style.css                    # æ ·å¼è¡¨
â”‚
â”œâ”€â”€ ğŸ“‚ config/                        # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ docker-compose.yml           # Docker Compose é…ç½®
â”‚   â”œâ”€â”€ srs.conf                     # SRS æœåŠ¡å™¨é…ç½®
â”‚   â””â”€â”€ devices.json                 # è®¾å¤‡ä¿¡æ¯å­˜å‚¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ video/                         # å½•åƒæ–‡ä»¶å­˜å‚¨ç›®å½•
â”‚   â””â”€â”€ {streamKey}_{deviceId}/      # æŒ‰è®¾å¤‡åˆ†ç»„çš„å½•åƒ
â”‚
â””â”€â”€ ğŸ“‚ node_modules/                  # Node.js ä¾èµ–ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

## ğŸ”§ æ ¸å¿ƒè„šæœ¬

### Windows å¯åŠ¨è„šæœ¬

- **`Start-Streaming-Auto.bat`** â­ æ¨èä½¿ç”¨
  - è‡ªåŠ¨è¯·æ±‚ç®¡ç†å‘˜æƒé™
  - ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
  - è‡ªåŠ¨é…ç½®ç½‘ç»œå’Œé˜²ç«å¢™

- **`start-streaming-environment.ps1`**
  - PowerShell æ ¸å¿ƒè„šæœ¬
  - ç”± `.bat` æ–‡ä»¶è‡ªåŠ¨è°ƒç”¨
  - å¤„ç†æ‰€æœ‰ç½‘ç»œé…ç½®å’ŒæœåŠ¡å¯åŠ¨

## âš™ï¸ ç¯å¢ƒè¦æ±‚

### å¿…å¤‡è½¯ä»¶

1. **Rancher Desktop** (æ¨è) æˆ– **Docker Desktop**
   - ä¸‹è½½åœ°å€ï¼šhttps://rancherdesktop.io/
   - âš ï¸ é‡è¦ï¼šä¸è¦åœ¨ WSL å†…æ‰‹åŠ¨å®‰è£… Docker

2. **WSL 2** (Windows Subsystem for Linux 2)
   - éœ€è¦å®‰è£… Ubuntu æˆ–å…¶ä»– Linux å‘è¡Œç‰ˆ
   - ä½¿ç”¨ `wsl -l -v` æ£€æŸ¥ç‰ˆæœ¬

3. **Node.js** (v16 æˆ–æ›´é«˜ç‰ˆæœ¬)
   - ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/

### Rancher Desktop é…ç½®ï¼ˆå…³é”®æ­¥éª¤ï¼‰

1. æ‰“å¼€ Rancher Desktop
2. è¿›å…¥ **Preferences â†’ WSL**
3. âœ… å‹¾é€‰ä½ çš„ WSL å‘è¡Œç‰ˆï¼ˆå¦‚ `Ubuntu`ï¼‰
4. âŒ ä¸è¦å‹¾é€‰ `rancher-desktop` æˆ– `rancher-desktop-data`
5. ä¿å­˜å¹¶ç­‰å¾…é‡å¯

### éªŒè¯é…ç½®

åœ¨ Ubuntu WSL ç»ˆç«¯ä¸­è¿è¡Œï¼š
```bash
docker --version
```

åº”è¯¥çœ‹åˆ°ï¼š
```
Docker version 28.3.3-rd, build 309deef
```

æ³¨æ„ `-rd` åç¼€ï¼Œè¡¨ç¤ºä½¿ç”¨çš„æ˜¯ Rancher Desktop æä¾›çš„ Dockerã€‚

## ğŸ¯ ä½¿ç”¨æµç¨‹

### 1. é¦–æ¬¡å®‰è£…

```bash
# åœ¨ streaming ç›®å½•ä¸‹
npm install
```

### 2. å¯åŠ¨æœåŠ¡

åŒå‡» `Start-Streaming-Auto.bat`ï¼Œç‚¹å‡»"æ˜¯"æˆäºˆç®¡ç†å‘˜æƒé™ã€‚

### 3. é…ç½® Android åº”ç”¨

åœ¨ `app/src/main/java/ai/fd/thinklet/app/squid/run/DefaultConfig.kt` ä¸­é…ç½®ï¼š

```kotlin
const val DEFAULT_STREAM_URL = "rtmp://YOUR-PC-IP:1935/thinklet.squid.run"
const val DEFAULT_STREAM_KEY = "device1"
```

### 4. å¼€å§‹æµåª’ä½“

åœ¨ Android åº”ç”¨ä¸­ç‚¹å‡»"å¼€å§‹æ¨æµ"ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://YOUR-PC-IP:8000
```

## ğŸ” æ•…éšœæ’æŸ¥å¿«é€Ÿå‚è€ƒ

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| Docker å‘½ä»¤æ‰¾ä¸åˆ° | æ£€æŸ¥ Rancher Desktop WSL é›†æˆé…ç½® |
| rancher-desktop é”™è¯¯æç¤º | ä½¿ç”¨ `Start-Streaming-Auto.bat` å¯åŠ¨ |
| Android æ— æ³•è¿æ¥ | ç¡®ä¿ PC å’Œæ‰‹æœºåœ¨åŒä¸€ Wi-Fi ç½‘ç»œ |
| é‡å¯åæ— æ³•è¿æ¥ | é‡æ–°è¿è¡Œ `Start-Streaming-Auto.bat` |

è¯¦ç»†çš„æ•…éšœæ’æŸ¥æ­¥éª¤è¯·æŸ¥çœ‹å„æ–‡æ¡£çš„"Troubleshooting"ç« èŠ‚ã€‚

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### æµåª’ä½“åŠŸèƒ½
- ğŸ¥ ä½å»¶è¿Ÿç›´æ’­ï¼ˆ1-3ç§’ï¼‰
- ğŸ“± å¤šè®¾å¤‡åŒæ—¶æ¨æµ
- ğŸ¬ å®æ—¶è§†é¢‘é¢„è§ˆ
- ğŸ“Š æµçŠ¶æ€ç›‘æ§

### æ–‡ä»¶ä¼ è¾“åŠŸèƒ½
- ğŸ”‹ æä½åŠŸè€—ï¼ˆå®‰å“ç«¯ CPU < 5%ï¼‰
- ğŸ”„ æ–­ç‚¹ç»­ä¼ 
- ğŸ” MD5 å®Œæ•´æ€§æ ¡éªŒ
- ğŸ“Š å®æ—¶è¿›åº¦æ˜¾ç¤º
- âš™ï¸ è‡ªåŠ¨é‡è¯•æœºåˆ¶

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ [QUICK-START.md](./docs/QUICK-START.md) çš„æ•…éšœæ’æŸ¥éƒ¨åˆ†
2. æŸ¥çœ‹ [README-streaming.md](./docs/README-streaming.md) çš„è¯¦ç»†æ•…éšœæ’æŸ¥
3. æ£€æŸ¥ç»ˆç«¯å’Œæµè§ˆå™¨æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡º
4. ç¡®è®¤æ‰€æœ‰ç¯å¢ƒè¦æ±‚éƒ½å·²æ»¡è¶³

## ğŸ“ æ–‡æ¡£æ›´æ–°æ—¥å¿—

### 2025-10-06
- âœ… é‡ç»„æ–‡ä»¶å¤¹ç»“æ„ï¼ˆdocs/, src/, public/, config/ï¼‰
- âœ… åˆ é™¤è¿‡æ—¶çš„æ‰‹åŠ¨é…ç½®æ–‡æ¡£
- âœ… å¼ºè°ƒ Rancher Desktop ä½œä¸ºæ ‡å‡† Docker ç¯å¢ƒ
- âœ… æ›´æ–°æ‰€æœ‰æ–‡æ¡£ä»¥åæ˜ è‡ªåŠ¨åŒ–å¯åŠ¨è„šæœ¬
- âœ… æ·»åŠ è¯¦ç»†çš„ç¯å¢ƒé…ç½®éªŒè¯æ­¥éª¤
- âœ… æ›´æ–°æ‰€æœ‰è·¯å¾„å¼•ç”¨å’Œä¾èµ–å…³ç³»

---

**å¼€å§‹ä½¿ç”¨**ï¼šç›´æ¥é˜…è¯» [QUICK-START.md](./docs/QUICK-START.md) å³å¯ï¼ğŸš€

